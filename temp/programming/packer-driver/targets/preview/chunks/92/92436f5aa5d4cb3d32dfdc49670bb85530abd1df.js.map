{"version":3,"sources":["file:///D:/PROJECT/stackground/assets/Scripts/Scenes/Main/MainScene.ts"],"names":["_decorator","Component","director","Label","sys","Constants","DataManager","ccclass","property","MainScene","SetScore","n","txtScore","string","toString","onLoad","highScore","parseInt","localStorage","getItem","score","getInstance","GetData","console","log","setItem","PlayGame","loadScene","scenePlay"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,Q,OAAAA,Q;AAAsBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,G,OAAAA,G;;AAC1DC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;2BAGjBS,S,WADZF,OAAO,CAAC,WAAD,C,UAGHC,QAAQ,CAACL,KAAD,C,2BAHb,MACaM,SADb,SAC+BR,SAD/B,CACyC;AAAA;AAAA;;AAAA;AAAA;;AAI9BS,QAAAA,QAAQ,CAACC,CAAD,EAAW;AACtB,eAAKC,QAAL,CAAcC,MAAd,GAAuBF,CAAC,CAACG,QAAF,EAAvB;AACH;;AACDC,QAAAA,MAAM,GAAE;AACJ,cAAIC,SAAS,GAAEC,QAAQ,CAAEb,GAAG,CAACc,YAAJ,CAAiBC,OAAjB,CAAyB;AAAA;AAAA,sCAAUH,SAAnC,CAAF,CAAR,IAA4D,CAA3E;AACA,cAAII,KAAK,GAAG;AAAA;AAAA,0CAAYC,WAAZ,GAA0BC,OAA1B,CAAkC;AAAA;AAAA,sCAAUF,KAA5C,EAAkD,CAAlD,CAAZ;AACAG,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBJ,KAAK,CAACN,QAAN,EAAtB;AACAS,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BR,SAAS,CAACF,QAAV,EAA1B;;AAEA,cAAGM,KAAK,GAAGJ,SAAX,EAAqB;AACjBA,YAAAA,SAAS,GAAGI,KAAZ;AACAhB,YAAAA,GAAG,CAACc,YAAJ,CAAiBO,OAAjB,CAAyB,WAAzB,EAAsCL,KAAK,CAACN,QAAN,EAAtC;AACH;;AACD,eAAKJ,QAAL,CAAcM,SAAd;AACH;;AACMU,QAAAA,QAAQ,GAAO;AAClBxB,UAAAA,QAAQ,CAACyB,SAAT,CAAmB;AAAA;AAAA,sCAAUC,SAA7B;AACH;;AArBoC,O","sourcesContent":["import { _decorator, Component, Node, director, Constraint, Label, sys } from 'cc';\r\nimport { Constants } from '../../Extention/Constants';\r\nimport { DataManager } from '../../Extention/DataManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MainScene')\r\nexport class MainScene extends Component {\r\n   \r\n    @property(Label) txtScore: Label;\r\n\r\n    public SetScore(n: number){\r\n        this.txtScore.string = n.toString();\r\n    }\r\n    onLoad(){\r\n        let highScore =parseInt( sys.localStorage.getItem(Constants.highScore)) || 0;\r\n        let score = DataManager.getInstance().GetData(Constants.score,0);\r\n        console.log(\"score:\" ,score.toString());\r\n        console.log(\"highScore:\" ,highScore.toString());\r\n\r\n        if(score > highScore){\r\n            highScore = score;\r\n            sys.localStorage.setItem('highScore', score.toString());\r\n        }\r\n        this.SetScore(highScore)\r\n    }\r\n    public PlayGame():void{\r\n        director.loadScene(Constants.scenePlay)\r\n    }\r\n}\r\n\r\n\r\n"]}